{
  "constants": [
    {"TEXT_COLOR":  "rgba(0,0,0,0.55"},
    {"HEADING_COLOR":  "rgba(0,0,0,0.4"},
    {"TEXT_STYLE":  {
      "color": {"$":  "TEXT_COLOR"},
      "font-family": "Arial, sans serif"
    }},
    {"CARD_HEADING_STYLE":  {
      "font-family": "Arial, sans serif",
      "color": {"$": "HEADING_COLOR"},
      "font-weight": "600",
      "font-size": "24px"
    }},
    {"GROUP_HEADING_STYLE":  {
      "$": "CARD_HEADING_STYLE",
      "font-size": "18px"
    }},
    {"LABEL_STYLE" : {
      "$": "TEXT_STYLE",
      "font-size": "16px"
    }},
    {"STATUS_SEQUENCE": [
      "closed",
      "in validation",
      "in code review",
      "in progress",
      "blocked",
      "open"
    ]},
    {"COLOR_BY_STATUS": [
      {
        "condition": "=closed",
        "color": "#548546"
      },
      {
        "condition": "=in validation",
        "color": "#7ea550"
      },
      {
        "condition": "=in code review",
        "color": "#a3b630"
      },
      {
        "condition": "=in progress",
        "color": "#cfc726"
      },
      {
        "condition": "=blocked",
        "color": "#b65b56"
      },
      {
        "condition": "=open",
        "color": "#d0d0d0"
      }
    ]},
    {"DEFAULT_TICKET_COLOR": "#a0a0a0"}
  ],
  "cards": [
    {
      "type": "jira:ticket",
      "size": {
        "w": 220,
        "h": 120
      },
      "background": {
        "type": "image",
        "source": "/images/SimpleCard.svg",
        "w": 220,
        "h": 120,
        "cornerRadius": 6
      },
      "colorcoding": {
        "type": "selection",
        "attribute": "jira:status",
        "cases": {"$":  "COLOR_BY_STATUS"},
        "default": {"$" : "DEFAULT_TICKET_COLOR"}
      },
      "elements": [
        {
          "key": "heading",
          "type": "textfield",
          "x": 10,
          "y": 10,
          "w": 200,
          "h": 18,
          "attribute": "uri",
          "style": {
            "font-weight": "bold",
            "color": "white",
            "font-size": "20px",
            "h-align": "center"
          }
        },
        {
          "key": "name",
          "type": "textfield",
          "x": 10,
          "y": 47,
          "w": 200,
          "h": 32,
          "attribute": "core:name",
          "style": {
            "color": {"$": "TEXT_COLOR"}
          }
        },
        {
          "key": "storybar",
          "type": "chart",
          "x": 10,
          "y": 89,
          "h": 20,
          "attribute": "jira:storypoints",
          "color": "rgba(0,0,0,0.15)",
          "chartType": "rect",
          "maxW": 200,
          "maxValue": 24
        },
        {
          "key": "storypts",
          "type": "textfield",
          "x": 12,
          "y": 67,
          "w": 30,
          "h": 20,
          "attribute": "jira:storypoints",
          "style": {
            "font-size": "16px",
            "font-weight": "bold",
            "color": "#FFFFFF"
          }
        }
      ]
    },
    {
      "type": "root",
      "background": {
        "type": "rect",
        "w": 1400,
        "h": 1000,
        "color": "#F0F0F0"
      },
      "elements": [
        {
          "key": "stories",
          "type": "childcards",
          "source": "jira:ticket",
          "aggregate": {
              "total-storypoints": {"attribute": "jira:storypoints", "calculate": "sum"}
          },
          "template": "trellis",
          "x": 10,
          "y": 10,
          "w": 400,
          "h": 500,
          "clickAction": "focusAlerts"
        },
        {
          "key": "storiesgrid",
          "type": "childcards",
          "source": "jira:ticket",
          "aggregate": {
            "total-storypoints": {"attribute": "jira:storypoints", "calculate": "sum"}
          },
          "template": "grid",
          "x": 550,
          "y": 10,
          "w": 400,
          "h": 800,
          "clickAction": "focusAlerts"
        }
      ]
    },
    {
      "type": "grid",
      "background": {
        "type": "rect",
        "w": 400,
        "h": 800,
        "cornerRadius": "6px",
        "color": "#FEFEFE",
        "x": 0,
        "y": 0
      },
      "elements": [
        {
          "key": "title",
          "type": "caption",
          "text": "{{core:nodeCount}} Stories",
          "style": {
            "color": "#A0A0A0",
            "font-weight": "bold",
            "font-size": "24px",
            "h-align": "left"
          },
          "x": 30,
          "y": 20,
          "w": 200,
          "h": 32
        },
        {
          "key": "storyptLabel",
          "type": "caption",
          "text": "Total Storypoints:",
          "x": 240,
          "y": 32,
          "w": 200,
          "h": 24,
          "style": {
            "color": "#A0A0A0",
            "font-size": "12px",
            "h-align": "left",
            "font-weight": "bold"
          }
        },
        {
          "key": "storypts",
          "type": "textfield",
          "attribute": "total-storypoints",
          "x": 348,
          "y": 30,
          "w": 200,
          "h": 24,
          "style": {
            "color": "#A0A0A0",
            "font-size": "16px",
            "h-align": "left",
            "font-weight": "bold"
          }
        },
        {
          "key": "storybar",
          "type": "chart",
          "source": "core:subNodes",
          "sortSequence": {"$": "STATUS_SEQUENCE"},
          "chartType": "stackedBar",
          "x": 20,
          "y": 60,
          "w": 360,
          "h": 20,
          "totalWidthAttribute": "storyPointSum",
          "widthAttribute": "jira:storypoints",
          "colorAttribute": "jira:status",
          "colors": {"$":  "COLOR_BY_STATUS"},
          "defaultColor": {"$": "DEFAULT_TICKET_COLOR"}
        },
        {
          "key": "nodes",
          "type": "childcards",
          "source": "core:subNodes",
          "x": 20,
          "y": 80,
          "w": 360,
          "h": 700,
          "arrangement": {
            "type": "grid",
            "lod": "full",
            "padding": 0.1
          },
          "template": "jira:ticket"
        }
      ]
    },
    { "type": "trellisGroupStacked",
      "background": {
        "type": "rect",
        "w": 400,
        "h": 70
      },
      "elements": [
        {
          "key": "label",
          "type": "textfield",
          "attribute": "core:name",
          "x": 0,
          "y": 0,
          "w": 400,
          "h": 25,
          "style": {"$":  "GROUP_HEADING_STYLE"}
        },
        { "key":  "counter",
          "type": "caption",
          "text": "{{core:nodeCount}} Stories, {{storyPointSum}} Story Points",
          "x": 200, "y": 6, "w": 200, "h": 16,
          "style": {"font-size":  "16px", "color":  "#A0A0A0", "h-align":  "right"}
        },
        {
          "key": "storybar",
          "type": "chart",
          "source": "core:subNodes",
          "sortSequence": {"$":  "STATUS_SEQUENCE"},
          "chartType": "stackedBar",
          "x": 0,
          "y": 30,
          "w": 400,
          "h": 30,
          "totalWidthAttribute": "storyPointSum",
          "widthAttribute": "jira:storypoints",
          "colorAttribute": "jira:status",
          "colors": {
            "$": "COLOR_BY_STATUS"
          },
          "defaultColor": {"$": "DEFAULT_TICKET_COLOR"}
        }
      ]},
    {
      "type": "trellis",
      "background": {
        "type": "rect",
        "w": 400,
        "h": 500,
        "cornerRadius": "6px",
        "color": "#FEFEFE",
        "x": 0,
        "y": 0
      },
      "elements": [
        {
          "key": "title",
          "type": "caption",
          "text": "{{core:nodeCount}} Stories",
          "style": {"$": "CARD_HEADING_STYLE"},
          "x": 30,
          "y": 20,
          "w": 200,
          "h": 32
        },
        {
          "key": "storyptLabel",
          "type": "caption",
          "text": "Total Storypoints:",
          "x": 240,
          "y": 32,
          "w": 200,
          "h": 24,
          "style": {
            "color": "#A0A0A0",
            "font-size": "12px",
            "h-align": "left",
            "font-weight": "bold"
          }
        },
        {
          "key": "storypts",
          "type": "textfield",
          "attribute": "total-storypoints",
          "x": 348,
          "y": 30,
          "w": 200,
          "h": 24,
          "style": {
            "color": "#A0A0A0",
            "font-size": "16px",
            "h-align": "left",
            "font-weight": "bold"
          }
        },
        {
          "key": "trellis",
          "type": "trellis",
          "source": "core:subNodes",
          "x": 20,
          "y": 60,
          "w": 360,
          "h": 400,
          "arrangement": {
            "type": "grid",
            "compact": true,
            "padding": 0.1
          },
          "aggregate": {
            "storyPointSum": {"attribute": "jira:storypoints", "calculate": "sum"}
          },
          "template": "trellisGroupStacked",
          "groupAttribute": "jira:team"
        }
      ]
    }
  ]
}